[{"path":"https://insightsengineering.github.io/unihtee/main/CONTRIBUTING.html","id":null,"dir":"","previous_headings":"","what":"Contributing to unihtee","title":"Contributing to unihtee","text":"outlines propose change unihtee. detailed info contributing , tidyverse packages, please see development contributing guide.","code":""},{"path":"https://insightsengineering.github.io/unihtee/main/CONTRIBUTING.html","id":"fixing-typos","dir":"","previous_headings":"","what":"Fixing typos","title":"Contributing to unihtee","text":"can fix typos, spelling mistakes, grammatical errors documentation directly using GitHub web interface, long changes made source file. generally means ’ll need edit roxygen2 comments .R, .Rd file. can find .R file generates .Rd reading comment first line.","code":""},{"path":"https://insightsengineering.github.io/unihtee/main/CONTRIBUTING.html","id":"bigger-changes","dir":"","previous_headings":"","what":"Bigger changes","title":"Contributing to unihtee","text":"want make bigger change, ’s good idea first file issue make sure someone team agrees ’s needed. ’ve found bug, please file issue illustrates bug minimal reprex (also help write unit test, needed).","code":""},{"path":"https://insightsengineering.github.io/unihtee/main/CONTRIBUTING.html","id":"pull-request-process","dir":"","previous_headings":"Bigger changes","what":"Pull request process","title":"Contributing to unihtee","text":"Fork package clone onto computer. haven’t done , recommend using usethis::create_from_github(\"insightsengineering/unihtee\", fork = TRUE). Install development dependences devtools::install_dev_deps(), make sure package passes R CMD check running devtools::check(). R CMD check doesn’t pass cleanly, ’s good idea ask help continuing. Create Git branch pull request (PR). recommend using usethis::pr_init(\"brief-description--change\"). Make changes, commit git, create PR running usethis::pr_push(), following prompts browser. title PR briefly describe change. body PR contain Fixes #issue-number. user-facing changes, add bullet top NEWS.md (.e. just first header). Follow style described https://style.tidyverse.org/news.html.","code":""},{"path":"https://insightsengineering.github.io/unihtee/main/CONTRIBUTING.html","id":"code-style","dir":"","previous_headings":"Bigger changes","what":"Code style","title":"Contributing to unihtee","text":"New code follow tidyverse style guide. can use styler package apply styles, please don’t restyle code nothing PR. use roxygen2, Markdown syntax, documentation. use testthat unit tests. Contributions test cases included easier accept.","code":""},{"path":"https://insightsengineering.github.io/unihtee/main/CONTRIBUTING.html","id":"code-of-conduct","dir":"","previous_headings":"","what":"Code of Conduct","title":"Contributing to unihtee","text":"Please note unihtee project released Contributor Code Conduct. contributing project agree abide terms.","code":""},{"path":"https://insightsengineering.github.io/unihtee/main/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"Apache License","title":"Apache License","text":"Version 2.0, January 2004 <http://www.apache.org/licenses/>","code":""},{"path":[]},{"path":"https://insightsengineering.github.io/unihtee/main/LICENSE.html","id":"id_1-definitions","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"1. Definitions","title":"Apache License","text":"“License” shall mean terms conditions use, reproduction, distribution defined Sections 1 9 document. “Licensor” shall mean copyright owner entity authorized copyright owner granting License. “Legal Entity” shall mean union acting entity entities control, controlled , common control entity. purposes definition, “control” means () power, direct indirect, cause direction management entity, whether contract otherwise, (ii) ownership fifty percent (50%) outstanding shares, (iii) beneficial ownership entity. “” (“”) shall mean individual Legal Entity exercising permissions granted License. “Source” form shall mean preferred form making modifications, including limited software source code, documentation source, configuration files. “Object” form shall mean form resulting mechanical transformation translation Source form, including limited compiled object code, generated documentation, conversions media types. “Work” shall mean work authorship, whether Source Object form, made available License, indicated copyright notice included attached work (example provided Appendix ). “Derivative Works” shall mean work, whether Source Object form, based (derived ) Work editorial revisions, annotations, elaborations, modifications represent, whole, original work authorship. purposes License, Derivative Works shall include works remain separable , merely link (bind name) interfaces , Work Derivative Works thereof. “Contribution” shall mean work authorship, including original version Work modifications additions Work Derivative Works thereof, intentionally submitted Licensor inclusion Work copyright owner individual Legal Entity authorized submit behalf copyright owner. purposes definition, “submitted” means form electronic, verbal, written communication sent Licensor representatives, including limited communication electronic mailing lists, source code control systems, issue tracking systems managed , behalf , Licensor purpose discussing improving Work, excluding communication conspicuously marked otherwise designated writing copyright owner “Contribution.” “Contributor” shall mean Licensor individual Legal Entity behalf Contribution received Licensor subsequently incorporated within Work.","code":""},{"path":"https://insightsengineering.github.io/unihtee/main/LICENSE.html","id":"id_2-grant-of-copyright-license","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"2. Grant of Copyright License","title":"Apache License","text":"Subject terms conditions License, Contributor hereby grants perpetual, worldwide, non-exclusive, -charge, royalty-free, irrevocable copyright license reproduce, prepare Derivative Works , publicly display, publicly perform, sublicense, distribute Work Derivative Works Source Object form.","code":""},{"path":"https://insightsengineering.github.io/unihtee/main/LICENSE.html","id":"id_3-grant-of-patent-license","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"3. Grant of Patent License","title":"Apache License","text":"Subject terms conditions License, Contributor hereby grants perpetual, worldwide, non-exclusive, -charge, royalty-free, irrevocable (except stated section) patent license make, made, use, offer sell, sell, import, otherwise transfer Work, license applies patent claims licensable Contributor necessarily infringed Contribution(s) alone combination Contribution(s) Work Contribution(s) submitted. institute patent litigation entity (including cross-claim counterclaim lawsuit) alleging Work Contribution incorporated within Work constitutes direct contributory patent infringement, patent licenses granted License Work shall terminate date litigation filed.","code":""},{"path":"https://insightsengineering.github.io/unihtee/main/LICENSE.html","id":"id_4-redistribution","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"4. Redistribution","title":"Apache License","text":"may reproduce distribute copies Work Derivative Works thereof medium, without modifications, Source Object form, provided meet following conditions: () must give recipients Work Derivative Works copy License; (b) must cause modified files carry prominent notices stating changed files; (c) must retain, Source form Derivative Works distribute, copyright, patent, trademark, attribution notices Source form Work, excluding notices pertain part Derivative Works; (d) Work includes “NOTICE” text file part distribution, Derivative Works distribute must include readable copy attribution notices contained within NOTICE file, excluding notices pertain part Derivative Works, least one following places: within NOTICE text file distributed part Derivative Works; within Source form documentation, provided along Derivative Works; , within display generated Derivative Works, wherever third-party notices normally appear. contents NOTICE file informational purposes modify License. may add attribution notices within Derivative Works distribute, alongside addendum NOTICE text Work, provided additional attribution notices construed modifying License. may add copyright statement modifications may provide additional different license terms conditions use, reproduction, distribution modifications, Derivative Works whole, provided use, reproduction, distribution Work otherwise complies conditions stated License.","code":""},{"path":"https://insightsengineering.github.io/unihtee/main/LICENSE.html","id":"id_5-submission-of-contributions","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"5. Submission of Contributions","title":"Apache License","text":"Unless explicitly state otherwise, Contribution intentionally submitted inclusion Work Licensor shall terms conditions License, without additional terms conditions. Notwithstanding , nothing herein shall supersede modify terms separate license agreement may executed Licensor regarding Contributions.","code":""},{"path":"https://insightsengineering.github.io/unihtee/main/LICENSE.html","id":"id_6-trademarks","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"6. Trademarks","title":"Apache License","text":"License grant permission use trade names, trademarks, service marks, product names Licensor, except required reasonable customary use describing origin Work reproducing content NOTICE file.","code":""},{"path":"https://insightsengineering.github.io/unihtee/main/LICENSE.html","id":"id_7-disclaimer-of-warranty","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"7. Disclaimer of Warranty","title":"Apache License","text":"Unless required applicable law agreed writing, Licensor provides Work (Contributor provides Contributions) “” BASIS, WITHOUT WARRANTIES CONDITIONS KIND, either express implied, including, without limitation, warranties conditions TITLE, NON-INFRINGEMENT, MERCHANTABILITY, FITNESS PARTICULAR PURPOSE. solely responsible determining appropriateness using redistributing Work assume risks associated exercise permissions License.","code":""},{"path":"https://insightsengineering.github.io/unihtee/main/LICENSE.html","id":"id_8-limitation-of-liability","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"8. Limitation of Liability","title":"Apache License","text":"event legal theory, whether tort (including negligence), contract, otherwise, unless required applicable law (deliberate grossly negligent acts) agreed writing, shall Contributor liable damages, including direct, indirect, special, incidental, consequential damages character arising result License use inability use Work (including limited damages loss goodwill, work stoppage, computer failure malfunction, commercial damages losses), even Contributor advised possibility damages.","code":""},{"path":"https://insightsengineering.github.io/unihtee/main/LICENSE.html","id":"id_9-accepting-warranty-or-additional-liability","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"9. Accepting Warranty or Additional Liability","title":"Apache License","text":"redistributing Work Derivative Works thereof, may choose offer, charge fee , acceptance support, warranty, indemnity, liability obligations /rights consistent License. However, accepting obligations, may act behalf sole responsibility, behalf Contributor, agree indemnify, defend, hold Contributor harmless liability incurred , claims asserted , Contributor reason accepting warranty additional liability. END TERMS CONDITIONS","code":""},{"path":"https://insightsengineering.github.io/unihtee/main/LICENSE.html","id":"appendix-how-to-apply-the-apache-license-to-your-work","dir":"","previous_headings":"","what":"APPENDIX: How to apply the Apache License to your work","title":"Apache License","text":"apply Apache License work, attach following boilerplate notice, fields enclosed brackets [] replaced identifying information. (Don’t include brackets!) text enclosed appropriate comment syntax file format. also recommend file class name description purpose included “printed page” copyright notice easier identification within third-party archives.","code":"Copyright [yyyy] [name of copyright owner]  Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at    http://www.apache.org/licenses/LICENSE-2.0  Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License."},{"path":"https://insightsengineering.github.io/unihtee/main/articles/using-unihtee.html","id":"background","dir":"Articles","previous_headings":"","what":"Background","title":"Using unihtee","text":"Treatment effect modifiers (TEMs) responsible disparate effects treatment population. confounders — meaning influence likelihood receiving treatment outcome — modify effect treatment outcome. precision medicine, effect modifiers delineate patient subgroups experience differing benefit given medical intervention. public health, used determine effect policy decisions sub-populations. Identifying TEMs, exist, required comprehensive understanding intervention’s effect population. Traditional parametric modeling techniques, like generalized linear models (GLMs), define TEMs confounders non-zero confounder-treatment interaction terms. settings characterized time--event outcomes, Cox proportional hazards model can similarly used. Inference TEMs therefore possible stringent conditions data-generating process. (semi)parametric methods’ assumptions, like linearity confounder-outcome relationship linear model proportional hazards Cox model, violated, however, results invalid. flexible approaches instead focus estimating conditional average treatment effect (CATE) using interpretable modeling techniques, like LASSO (Tibshirani 1996; Tian et al. 2014; S. Chen et al. 2017; Q. Zhao, Small, Ertefaie 2018; Semenova Chernozhukov 2020; Bahamyirou et al. 2022) Random Forests (Breiman 2001; Wager Athey 2018; Cui et al. 2022). , however, methods require restrictive assumptions data-generating process, like sparsity treatment effect modification (P. Zhao Yu 2006), approximately uncorrelated confounders (P. Zhao Yu 2006; Hastie, Tibshirani, Friedman 2009) sample sizes much larger number confounders (P. Zhao Yu 2006), reliably recover TEMs. Instead identifying TEMs indirectly modeling confounder-treatment-outcome relationship, recent work developed frameworks tailored task (Williamson et al. 2022; Boileau et al. 2022, 2023; Hines, Diaz-Ordaz, Vansteelandt 2022). Relying TEM variable importance parameters (TEM-VIP), possible assess confounders’ influence treatment effect nonparametric, algorithm-agnostic fashion largely avoids pitfalls parametric CATE-based methodologies. TEM-VIPs defined within nonparametric statistical models may augmented causal interpretations, permitting formal inference TEMs. unihtee R package implements recent proposals Boileau et al. (2022) Boileau et al. (2023). TEM-VIP framework relies parameters assess marginal effect confounder treatment effect heterogeneity, however treatment effect defined. Nonparametric estimators provided works, asymptotic properties established. particular, estimators shown asymptotically linear minimal assumptions data-generating process, recover treatment effect modifiers readily competing methods. TEM-VIPs estimators introduced alongside worked examples following section.","code":""},{"path":"https://insightsengineering.github.io/unihtee/main/articles/using-unihtee.html","id":"unihtee-in-action","dir":"Articles","previous_headings":"","what":"unihtee in Action","title":"Using unihtee","text":"unihtee R package performs inference TEM-VIPs data-generating processes binary exposure variable either continuous, binary, right-censored time--event outcomes. restriction placed confounding variables, though ordinal confounders formatted factors using ordered(), categorical confounders one-hot encoded.","code":""},{"path":"https://insightsengineering.github.io/unihtee/main/articles/using-unihtee.html","id":"working-with-continuous-outcomes","dir":"Articles","previous_headings":"unihtee in Action","what":"Working with Continuous Outcomes","title":"Using unihtee","text":"Let \\(n\\) independent identically distributed (..d.) random vectors \\({X_i}_{=1}^n\\) \\(X_i = (W_i, A_i, Y^{(0)}, Y_i^{(1)}) \\sim P_{X,0} \\\\mathcal{M}_X\\). Dropping index possible notational convenience remainder tutorial, \\(W\\) defined set \\(p\\) confounders, \\(\\) binary treatment indicator, \\(Y^{(0)}, Y_i^{(1)}\\) continuous potential outcomes (Rubin 1974) produced control treatment conditions, respectively. , \\(\\mathcal{M}_X\\) full-data nonparametric model possible data-generating processes, contains true unknown full-data data-generating process \\(P_{X,0}\\). Now, \\(P_{X,0}\\) generally unknown random vectors unobservable: one potential outcome ever measurable practice. Still, \\(P_{X,0}\\) allows us readily define causal parameters inference may subsequently performed. Examples given subsections . instead access \\(n\\) ..d. random observations \\(O=(W,,Y) \\sim P_0 \\\\mathcal{M}\\), \\(W\\) \\(\\) defined full-data, \\(Y = AY^{(1)} + (1-)Y{(0)}\\). \\(\\mathcal{M}\\) observed-data statistical model containing possible observed-data data-generating processes, including true data-generating process \\(P_{0}\\). Note elements \\(\\mathcal{M}\\) fully specified full-data counterparts \\(\\mathcal{M}_{X}\\). established requisite statistical objects, let’s define data-generating process: ’s clear definition potential outcomes w_2 w_3 treatment effect modifiers: interact treatment indicator . TEM-VIP quantifying strength treatment effect modification outlined next.","code":"cont_outcome_dgp <- function(n_obs) {    # confounders   w_1 <- rnorm(n = n_obs)   w_2 <- rnorm(n = n_obs)   w_3 <- rnorm(n = n_obs)   w_4 <- rnorm(n = n_obs)   w_5 <- rnorm(n = n_obs)    # treatment   prop_score <- plogis(w_1 + w_2)   a <- rbinom(n_obs, 1, prob = prop_score)    # potential outcomes   y_1 <- rnorm(n = n_obs, mean = w_1 + 2 * w_2 + 2 * w_3 + 0.5 * a, sd = 0.1)   y_0 <- rnorm(n = n_obs, mean = w_1 + w_2, sd = 0.1)    # outcome   y <- a * y_1 + (1 - a) * y_0    # assemble the observations in a tibble   tibble(     w_1 = w_1,     w_2 = w_2,     w_3 = w_3,     w_4 = w_4,     w_5 = w_5,     a = a,     y = y   ) }"},{"path":"https://insightsengineering.github.io/unihtee/main/articles/using-unihtee.html","id":"absolute-tem-vip","dir":"Articles","previous_headings":"unihtee in Action > Working with Continuous Outcomes","what":"Absolute TEM-VIP","title":"Using unihtee","text":"Indexing \\(W\\) \\(j=1,\\ldots,p\\), assuming without loss generality \\(\\mathbb{E}_{P_{X,0}}[W_j] = 0, \\mathbb{E}_{P_{X,0}}[W_j^2] > 0\\), can define first TEM-VIP \\(j^\\text{th}\\) confounder follows: \\[ \\Psi^F_j(P_{X,0}) = \\frac{\\mathbb{E}_{P_{X,0}}[(Y^{(1)}-Y^{(0)})W_j]}{\\mathbb{E}_{P_{X,0}}[W_j^2]} =\\frac{\\mathbb{E}_{P_{X,0}}[(\\mathbb{E}_{P_{X,0}}[Y^{(1)}|W]-   \\mathbb{E}_{P_{X,0}}[Y^{(0)}|W])W_j]}   {\\mathbb{E}_{P_{X,0}}[W_j^2]} \\;. \\] parameter called absolute TEM-VIP. Assuming expectation \\(\\mathbb{E}_{P_{X,0}}[Y^{(1)}|W]- \\mathbb{E}_{P_{X,0}}[Y^{(0)}|W]\\) conditional \\(W_j\\) linear \\(W_j\\), \\(\\Psi^F_j(P_{X,0})\\) simple linear regression coefficient produced regressing difference expected potential outcomes confounder \\(W_j\\). Even relationship nonlinear, almost surely case applications, \\(\\Psi^F_j(P_{X,0})\\) corresponds correlation difference potential outcomes \\(j^\\text{th}\\) confounder, re-normalized scale potential outcomes. course, stated earlier, don’t generally access full-data random vectors required perform inference parameter. Luckily, identification conditions outlined Boileau et al. (2022) Boileau et al. (2023) — namely, unmeasured confounding positivity violations — can perform inference equivalent observed-data parameter: \\[ \\Psi_j(P_0) =\\frac{\\mathbb{E}_{P_0}[(\\mathbb{E}_{P_{0}}[Y|=1,W]-   \\mathbb{E}_{P_0}[Y|=0,W])W_j]}{\\mathbb{E}_{P_0}[W_j^2]} = \\Psi^F_j(P_{X,0})\\;. \\] Boileau et al. (2022) Boileau et al. (2023) derive two nonparametric estimators parameter: one-step targeted maximum likelihood (TML) estimators. require estimation two nuisance parameters: propensity score expected outcome conditioned treatment confounders. estimators double robust: one nuisance parameter required consistently estimated ensure one-step TML estimators consistent. nuisance parameters converge true values fast enough rate, one-step TML estimators asymptotically normal. permits hypothesis testing \\(\\Psi_j(P_0)\\) using Wald-type confidence intervals. details estimators asymptotic properties provided Boileau et al. (2022) Boileau et al. (2023). defined parameter briefly discussed estimators, apply unicate() recover treatment effect modifiers, defined absolute TEM-VIP. one-step TML estimators showcased. LASSO regression Tibshirani (1996) used estimate nuisance parameters. unicate() outputs table results summarizing TEM-VIP inference procedure potential treatment effect modifier. table ordered nominal p-value inference procedure. one-step TML estimators correctly identify TEM-VIP w_2 w_3 non-zero based false discovery rate adjusted p-values. estimator’s point estimates also close true parameter values; every unit increase w_2, one-step TML estimators suggest average treatment effect increases \\(\\approx 0.88\\) \\(\\approx 0.86\\) units, respectively. Similarly w_3, one-step TML estimators indicate unit increase confounder leads increase \\(\\approx 2.04\\) \\(\\approx 1.98\\) average treatment effect, respectively.","code":"set.seed(514)  # simulate a random sample sample_df <- cont_outcome_dgp(n_obs = 500)  # one-step estimator unihtee(   data = sample_df,   confounders = c(\"w_1\", \"w_2\", \"w_3\", \"w_4\", \"w_5\"),   modifiers =  c(\"w_1\", \"w_2\", \"w_3\", \"w_4\", \"w_5\"),   exposure = \"a\",   outcome = \"y\",   outcome_type = \"continuous\",   effect = \"absolute\",   estimator = \"onestep\",   cond_outcome_estimator = sl3::Lrnr_glmnet$new(     family = \"gaussian\",     formula = \"~ a * w_1 + a * w_2 + a * w_3 + a * w_4 + a * w_5\"   ),   prop_score_estimator = sl3::Lrnr_glmnet$new(family = \"binomial\") ) #>    modifier    estimate         se          z      p_value    ci_lower #> 1:      w_3  1.94918442 0.13370581 14.5781579 0.000000e+00  1.68712103 #> 2:      w_2  0.84690336 0.10529721  8.0429801 8.881784e-16  0.64052083 #> 3:      w_5  0.14521709 0.10425853  1.3928558 1.636634e-01 -0.05912962 #> 4:      w_4 -0.13211440 0.10613296 -1.2448009 2.132049e-01 -0.34013499 #> 5:      w_1 -0.05285389 0.08758479 -0.6034596 5.462030e-01 -0.22452009 #>      ci_upper  p_value_fdr #> 1: 2.21124781 0.000000e+00 #> 2: 1.05328589 2.220446e-15 #> 3: 0.34956381 2.665062e-01 #> 4: 0.07590619 2.665062e-01 #> 5: 0.11881231 5.462030e-01  # TML estimator unihtee(   data = sample_df,   confounders = c(\"w_1\", \"w_2\", \"w_3\", \"w_4\", \"w_5\"),   modifiers =  c(\"w_1\", \"w_2\", \"w_3\", \"w_4\", \"w_5\"),   exposure = \"a\",   outcome = \"y\",   outcome_type = \"continuous\",   effect = \"absolute\",   estimator = \"tmle\",   cond_outcome_estimator = sl3::Lrnr_glmnet$new(     family = \"gaussian\",     formula = \"~ a * w_1 + a * w_2 + a * w_3 + a * w_4 + a * w_5\"   ),   prop_score_estimator = sl3::Lrnr_glmnet$new(family = \"binomial\") ) #>    modifier    estimate         se          z      p_value    ci_lower #> 1:      w_3  1.91206506 0.13386174 14.2838801 0.000000e+00  1.64969605 #> 2:      w_2  0.81924540 0.10526619  7.7826068 7.105427e-15  0.61292365 #> 3:      w_5  0.15243525 0.10422216  1.4625992 1.435771e-01 -0.05184018 #> 4:      w_4 -0.11700272 0.10569020 -1.1070347 2.682789e-01 -0.32415551 #> 5:      w_1 -0.06328782 0.08714635 -0.7262246 4.677011e-01 -0.23409467 #>      ci_upper  p_value_fdr #> 1: 2.17443407 0.000000e+00 #> 2: 1.02556714 1.776357e-14 #> 3: 0.35671067 2.392951e-01 #> 4: 0.09015007 3.353486e-01 #> 5: 0.10751902 4.677011e-01"},{"path":"https://insightsengineering.github.io/unihtee/main/articles/using-unihtee.html","id":"working-with-binary-outcomes","dir":"Articles","previous_headings":"unihtee in Action","what":"Working with Binary Outcomes","title":"Using unihtee","text":"binary outcome setting, full-data observed-data models data-generating processes identical continuous outcome setting, save outcome binary. means absolute TEM-VIP can used binary-outcome data — practical difference choice estimator used expected outcome conditional treatment confounders. said, relative TEM-VIP generally sensitive informative scenarios. propose parameter following section. , however, define data-generating process two treatment effect modifiers: , w_2 w_3 treatment effect modifier. interact treatment variable, .","code":"bin_outcome_dgp <- function(n_obs) {    # confounders   w_1 <- rpois(n = n_obs, lambda = 3)   w_2 <- rnorm(n = n_obs)   w_3 <- rbinom(n = n_obs, size = 1, prob = 0.5)    # treatment   prop_score <- plogis(-0.5 + 0.25 * w_1 + w_2 + 0.5 * w_3)   a <- rbinom(n_obs, 1, prob = prop_score)    # potential outcomes   y_prob_1 <- plogis(-1 - 3 * w_3)   y_prob_0 <- plogis(1 + 2 * w_2)   y_1 <- rbinom(n_obs, 1, prob = y_prob_1)   y_0 <- rbinom(n_obs, 1, prob = y_prob_0)    # outcome   y <- a * y_1 + (1 - a) * y_0    # assemble the observations in a tibble   tibble(     w_1 = w_1,     w_2 = w_2,     w_3 = w_3,     a = a,     y = y   ) }"},{"path":"https://insightsengineering.github.io/unihtee/main/articles/using-unihtee.html","id":"relative-tem-vip","dir":"Articles","previous_headings":"unihtee in Action > Working with Binary Outcomes","what":"Relative TEM-VIP","title":"Using unihtee","text":"assuming confounders centered zero non-zero variance, relative TEM-VIP \\(j^\\text{th}\\) confounder \\[ \\Gamma^F_j(P_{X,0}) =\\frac{\\mathbb{E}_{P_{X,0}}[(\\log\\mathbb{E}_{P_{X,0}}[Y^{(1)}|W]-   \\log\\mathbb{E}_{P_{X,0}}[Y^{(0)}|W])W_j]}   {\\mathbb{E}_{P_{X,0}}[W_j^2]} \\;. \\] Assuming expectation log ratio expected conditional potential outcomes conditional \\(W_j\\) linear \\(W_j\\), \\(\\Gamma^F_j(P_{X,0})\\) simple linear regression coefficient obtained regressing log ratio expected conditional potential outcomes \\(W_j\\). \\(\\Psi^F_j(P_{X,0})\\), parameter can interpreted standardized correlation coefficient log ratio expected potential outcomes \\(j^\\text{th}\\) confounder. highlight TEM-VIP isn’t restricted data-generating processes binary outcomes; may also used outcome non-negative, continuous discrete random variable. , much like \\(\\Psi^F_j(P_{X,0})\\), \\(\\Gamma^F_j(P_{X,0})\\) isn’t generally ever observed since parameter full-data model. conditions unmeasured confounding absence positivity violations, however, equivalent parameter can estimated observed-data: \\[ \\Gamma_j(P_0) =\\frac{\\mathbb{E}_{P_0}[(\\log\\mathbb{E}_{P_{0}}[Y|=1,W]-   \\log\\mathbb{E}_{P_0}[Y|=0,W])W_j]}{\\mathbb{E}_{P_0}[W_j^2]} = \\Gamma^F_j(P_{X,0})\\;. \\] Nonparametric one-step TML estimators parameter derived Boileau et al. (2023) implemented unicate package. Just like \\(\\Psi_j(P_0)\\), inference parameter depends estimation propensity score expected outcome conditional treatment indicator confounders. estimators consistent nuisance parameters consistently estimated, asymptotically normal converge true values rate \\(n^{-1/4}\\). latter permits hypothesis testing based Gaussian. Additional details provided Boileau et al. (2023). now apply estimators random sample generated bin_outcome_dgp(). nuisance parameters estimated using Random Forests implemented ranger package (Breiman 2001; Wright Ziegler 2017). Note estimators fit using cross-fitting (Zheng van der Laan 2011; Chernozhukov et al. 2017). estimators correctly identify w_2 w_3 treatment effect modifiers, defined relative TEM-VIP. one-step estimator’s results suggest every unit increase w_2 w_3, log ratio conditional expected potential outcomes expected decrease \\(\\approx 1.06\\) \\(\\approx 3.00\\) units, respectively. TML estimator, log ration conditional expected outcomes expected decrease \\(\\approx 1.39\\) \\(\\approx 3.52\\) every unit increase w_2 w_3, respectively.","code":"# simulate a random sample sample_df <- bin_outcome_dgp(n_obs = 500)  # one-step estimator unihtee(   data = sample_df,   confounders = c(\"w_1\", \"w_2\", \"w_3\"),   modifiers =  c(\"w_1\", \"w_2\", \"w_3\"),   exposure = \"a\",   outcome = \"y\",   outcome_type = \"binary\",   effect = \"relative\",   estimator = \"onestep\",   cond_outcome_estimator = sl3::Lrnr_ranger$new(),   prop_score_estimator = sl3::Lrnr_ranger$new(),   cross_fit = TRUE ) #>    modifier   estimate        se         z      p_value   ci_lower   ci_upper #> 1:      w_2 -1.1714214 0.2831918 -4.136495 3.526517e-05 -1.7264774 -0.6163655 #> 2:      w_3 -2.7446161 1.0922870 -2.512724 1.198029e-02 -4.8854986 -0.6037336 #> 3:      w_1  0.2347776 0.1871624  1.254406 2.096946e-01 -0.1320607  0.6016159 #>     p_value_fdr #> 1: 0.0001057955 #> 2: 0.0179704377 #> 3: 0.2096945985  # TML estimator unihtee(   data = sample_df,   confounders = c(\"w_1\", \"w_2\", \"w_3\"),   modifiers =  c(\"w_1\", \"w_2\", \"w_3\"),   exposure = \"a\",   outcome = \"y\",   outcome_type = \"binary\",   effect = \"relative\",   estimator = \"tmle\",   cond_outcome_estimator = sl3::Lrnr_ranger$new(),   prop_score_estimator = sl3::Lrnr_ranger$new(),   cross_fit = TRUE ) #>    modifier     estimate        se           z      p_value   ci_lower #> 1:      w_3 -3.478340586 0.7746871 -4.48999399 7.122518e-06 -4.9967274 #> 2:      w_2 -1.425906898 0.3203599 -4.45095295 8.549007e-06 -2.0538123 #> 3:      w_1  0.009961001 0.1692693  0.05884707 9.530739e-01 -0.3218068 #>      ci_upper  p_value_fdr #> 1: -1.9599538 1.282351e-05 #> 2: -0.7980015 1.282351e-05 #> 3:  0.3417288 9.530739e-01"},{"path":"https://insightsengineering.github.io/unihtee/main/articles/using-unihtee.html","id":"working-with-time-to-event-outcomes","dir":"Articles","previous_headings":"unihtee in Action","what":"Working with Time-to-Event Outcomes","title":"Using unihtee","text":"unihtee also provides functionality estimating TEM-VIPs data right-censored time--event outcomes. detail assumed full-data observed-data models , introduce absolute relative TEM-VIP subsequent sections. Consider \\(n\\) ..d. random vectors \\(X = (W, , C^{(0)}, C^{(1)}, T^{(0)}, T^{(1)}) \\sim P_{X,0} \\\\mathcal{M}_X\\). \\(W, , P_{X,0},\\) \\(\\mathcal{M}_X\\) defined continuous binary outcome models. \\(C^{(0)}\\) \\(C^{(1)}\\) correspond censoring times observed control treatment conditions, respectively. Similarly, \\(T^{(0)}\\) \\(T^{(1)}\\) event times observed either treatment assignment. , \\(P_{X,0}\\) generally unobservable. instead access random observations \\(O = (W, , \\Delta, T) \\sim P_0 \\\\mathcal{M}\\), \\(\\Delta\\) censoring indicator \\(T = (\\Delta C^{(1)} + (1-\\Delta)T^{(1)}) + (1-)(\\Delta C^{(0)} + (1-\\Delta) T^{(0)})\\). \\(W, , P_0,\\) \\(\\mathcal{M}\\) defined previous observed-data models. Now, ’s worth introducing full-data observed-data conditional survival functions since TEM-VIPs introduced section rely . full-data survival function defined \\(S_{P_{X,0}}(t|,W) = \\mathbb{P}_{P_{X,0}}[T^{()} > t | W]\\). parameter’s observed-data counterpart defined analogously \\(S_0(t|,W) = P_{P_0}[T > t |, W]\\). Finally, define time--event data-generating process nine equidistant time points three potential confounders, w_1, w_2, w_3. confounders, w_1 treatment effect modifier. Note unihtee() requires “wide” data format working time--event outcome data. , observation represented single row data. example provided following code chunk.","code":"# define hazard functions cond_cens_hazard <- function(time, a, w_1, w_2, w_3) {   (time < 9) / (1 + exp(4 + 0.2 * (w_1 + w_2) - a)) } cond_surv_hazard <- function(time, a, w_1, w_2, w_3) {   (time < 9) / (1 + exp(2 + 3 * a * w_1)) + (time == 9) }  # failure time simulator failure_time_sim <- function(n_obs, a, w_1, w_2, w_3) {   sapply(     seq_len(n_obs),     function(obs) {       failure_time <- NA       for (t in 1:9) {         prob <- cond_surv_hazard(t, a, w_1[obs], w_2[obs], w_3[obs])         status <- rbinom(1, 1, prob)         if (status == 1) {           failure_time <- t           break         }       }       return(failure_time)     }   ) }  # censoring time simulator censor_time_sim <- function(n_obs, a, w_1, w_2, w_3) {   sapply(     seq_len(n_obs),     function(obs) {       censor_time <- NA       for (t in 1:9) {         prob <- cond_cens_hazard(t, a, w_1[obs], w_2[obs], w_3[obs])         status <- rbinom(1, 1, prob)         if (status == 1) {           censor_time <- t           break         }       }       if (is.na(censor_time)) censor_time <- 10       return(censor_time)     }   ) }  # time-to-event outcome data-generating process tte_outcome_dgp <- function(n_obs) {    # confounders   w_1 <- rnorm(n = n_obs)   w_2 <- rnorm(n = n_obs)   w_3 <- rnorm(n = n_obs)    # treatment   prop_score <- plogis(-1 - w_1 + w_2 - w_3)   a <- rbinom(n_obs, 1, prob = prop_score)    # generate the failure events for t = 1 to 9   failure_time_1 <- failure_time_sim(n_obs, 1, w_1, w_2, w_3)   failure_time_0 <- failure_time_sim(n_obs, 0, w_1, w_2, w_3)    # generate the censoring events for t = 1 to 9   censor_time_1 <- censor_time_sim(n_obs, 1, w_1, w_2, w_3)   censor_time_0 <- censor_time_sim(n_obs, 0, w_1, w_2, w_3)    # compile the failure and censoring times   failure_time <- sapply(     seq_len(n_obs),     function(obs) {       if (a[obs] == 1) failure_time_1[obs] else failure_time_0[obs]     }   )   censor_time <- sapply(     seq_len(n_obs),     function(obs) {       if (a[obs] == 1) censor_time_1[obs] else censor_time_0[obs]     }   )      # determine the observed time-to-event and censoring indicator   time <- sapply(     seq_len(n_obs),     function(obs) {       if (censor_time[obs] < failure_time[obs]) {         censor_time[obs]       } else {         failure_time[obs]       }     }   )   censoring_indicator <- sapply(     seq_len(n_obs),     function(obs) if (time[obs] == censor_time[obs]) 1 else 0   )      # assemble the tibble   tibble(     w_1 = w_1,     w_2 = w_2,     w_3 = w_3,     a = a,     time = time,     censoring_indicator = censoring_indicator   ) } tte_outcome_dgp(10) #> # A tibble: 10 × 6 #>       w_1     w_2    w_3     a  time censoring_indicator #>     <dbl>   <dbl>  <dbl> <int> <dbl>               <dbl> #>  1  0.185  0.369   0.753     0     9                   0 #>  2 -1.19   1.13   -1.96      1     1                   0 #>  3 -0.926  0.551  -1.23      1     1                   0 #>  4  1.59  -0.0865  0.725     0     4                   0 #>  5 -1.59   1.13   -1.88      1     1                   0 #>  6 -1.07   1.31    0.492     0     7                   0 #>  7 -0.861 -1.73    0.430     0     6                   1 #>  8 -1.57   1.30    1.08      1     1                   0 #>  9 -0.600  0.0367 -1.40      0     1                   0 #> 10 -0.410  1.30   -0.238     0     6                   0"},{"path":"https://insightsengineering.github.io/unihtee/main/articles/using-unihtee.html","id":"absolute-tem-vip-1","dir":"Articles","previous_headings":"unihtee in Action > Working with Time-to-Event Outcomes","what":"Absolute TEM-VIP","title":"Using unihtee","text":"Boileau et al. (2023) Propose absolute TEM-VIP based restricted mean survival time pre-specified time \\(t\\). assuming without loss generality \\(\\mathbb{E}_{P_{X,0}}[W_j] = 0\\) confounders variance bounded away zero, TEM-VIP defined \\[ \\Psi_j^F(P_{X,0};t) = \\frac{\\mathbb{E}_{P_{X,0}}\\left[W_j   \\int_0^t \\{ S_{P_{X,0}}(u|1, W) - S_{P_{X,0}}(u|0, W) \\} du \\right]}   {\\mathbb{E}_{P_{X,0}}[W_j^2]} \\; . \\] “\\(\\Psi\\)” re-used highlight absolute TEM-VIP. continuous outcome scenario, parameter captures correlation conditional difference restricted mean survival time \\(j^\\text{th}\\) confounder, re-normalized scale outcome. Put another way, parameter identifies confounders driving largest difference truncated survival times across treatment conditions. , full-data parameter equal following observed-data parameter assumptions (1) unmeasured confounding, (2) censoring mechanism positivity, (3) treatment assignment positivity: \\[ \\Psi_j(P_0;t) = \\frac{\\mathbb{E}_{P_0}\\left[W_j   \\int_0^t \\{ S_0(u|1, W) - S_0(u|0, W) \\} du \\right]}   {\\mathbb{E}_{P_0}[W_j^2]} \\; . \\] continuous binary outcome scenarios, Boileau et al. (2023) derived two estimators absolute effect parameter: one-step estimator TML estimator. rely accurate estimation three nuisance parameters: conditional event hazard function, conditional censoring hazard function, propensity score. either conditional event hazard function conditional censoring hazard function propensity score consistently estimated, nonparametric estimators consistent. , nuisance parameters converge true values rate \\(n^{-1/4}\\), estimators asymptotically normally distributed. permits Gaussian-based hypothesis testing use Wald-type confidence intervals. See Boileau et al. (2023) details. now apply estimators random sample data-generating process defined , choosing target parameter \\(\\Psi(P_0; 8)\\). LASSO regressions used estimate propensity scores censoring hazard functions, , demonstration methods’ flexibility, estimate failure hazard function XGBoost (T. Chen Guestrin 2016). results suggest every unit increase w_1 results increase \\(\\approx 1.66\\) — according one-step estimator — \\(\\approx 1.25\\) — according TML estimator — time units difference mean survival times, truncated time eight.","code":"# simulate a random sample sample_df <- tte_outcome_dgp(n_obs = 250)  # one-step estimator unihtee(   data = sample_df,   confounders = c(\"w_1\", \"w_2\", \"w_3\"),   modifiers = c(\"w_1\", \"w_2\", \"w_3\"),   exposure = \"a\",   outcome = \"time\",   censoring = \"censoring_indicator\",   time_cutoff = 8,   outcome_type = \"time-to-event\",   effect = \"absolute\",   estimator = \"onestep\",   prop_score_estimator = sl3::Lrnr_glmnet$new(),   failure_hazard_estimator = sl3::Lrnr_xgboost$new(),   censoring_hazard_estimator = sl3::Lrnr_glmnet$new() ) #>    modifier    estimate        se          z      p_value   ci_lower  ci_upper #> 1:      w_1  1.65578106 0.3100170  5.3409367 9.246754e-08  1.0481478 2.2634143 #> 2:      w_2 -0.27580480 0.2378789 -1.1594338 2.462794e-01 -0.7420474 0.1904378 #> 3:      w_3  0.04483202 0.2631764  0.1703497 8.647351e-01 -0.4709937 0.5606577 #>     p_value_fdr #> 1: 2.774026e-07 #> 2: 3.694191e-01 #> 3: 8.647351e-01  # TML estimator unihtee(   data = sample_df,   confounders = c(\"w_1\", \"w_2\", \"w_3\"),   modifiers = c(\"w_1\", \"w_2\", \"w_3\"),   exposure = \"a\",   outcome = \"time\",   censoring = \"censoring_indicator\",   time_cutoff = 8,   outcome_type = \"time-to-event\",   effect = \"absolute\",   estimator = \"tmle\",   prop_score_estimator = sl3::Lrnr_glmnet$new(),   failure_hazard_estimator = sl3::Lrnr_xgboost$new(),   censoring_hazard_estimator = sl3::Lrnr_glmnet$new() ) #>    modifier    estimate        se          z      p_value   ci_lower   ci_upper #> 1:      w_1  1.24516252 0.3137506  3.9686383 7.228451e-05  0.6302114 1.86011363 #> 2:      w_2 -0.37336556 0.2401380 -1.5547961 1.199946e-01 -0.8440360 0.09730484 #> 3:      w_3 -0.07052526 0.2658042 -0.2653278 7.907569e-01 -0.5915015 0.45045101 #>     p_value_fdr #> 1: 0.0002168535 #> 2: 0.1799919603 #> 3: 0.7907569131"},{"path":"https://insightsengineering.github.io/unihtee/main/articles/using-unihtee.html","id":"relative-tem-vip-1","dir":"Articles","previous_headings":"unihtee in Action > Working with Time-to-Event Outcomes","what":"Relative TEM-VIP","title":"Using unihtee","text":"next consider relative TEM-VIP data right-censored time--event outcomes. assuming potential treatment effect modifiers centered variance bounded away zero, define parameter follows \\(j^\\text{th}\\) confounder: \\[ \\Gamma_j^F(P_{X,0};t) = \\frac{\\mathbb{E}_{P_{X,0}}\\left[W_j   (\\log S_{P_{X,0}}(t|1, W) - \\log S_{P_{X,0}}(t|0, W))\\right]}   {\\mathbb{E}_{P_{X,0}}[W_j^2]} \\; . \\] pre-specified time point \\(t\\), TEM-VIP represents standardized correlation coefficient \\(W_j\\) log ratio conditional survival times treatment condition. “\\(\\Psi\\)”, re-use “\\(\\Gamma\\)” highlight relative effect parameter. observed-data counterpart given \\[ \\Gamma_j^F(P_0;t) = \\frac{\\mathbb{E}_{P_0}\\left[W_j   (\\log S_0(t|1, W) - \\log S_0(t|0, W))\\right]}   {\\mathbb{E}_{P_0}[W_j^2]} \\; , \\] assuming unmeasured confounding positivity violations censoring treatment assignment mechanisms. Boileau et al. (2023) derived one-step TML estimators parameter, requiring estimation three nuisance parameters: propensity score conditional failure censoring event hazards. one-step TML estimators consistent nuisance parameters estimated consistently, asymptotically linear nuisance parameters converge true values fast-enough rate (Boileau et al. 2023). apply nonparametric estimators Boileau et al. (2023) random sample generated tte_outcome_dgp(), taking target inference \\(\\Gamma_j(P_0; 5)\\). nuisance parameters estimated using strategy employed prior absolute TEM-VIP example. , one-step TML estimators successfully discern treatment effect modifier potential confounders using false discovery rate cutoff \\(5\\%\\). results indicate unit increase w_1 results increase log ratio conditional survivals equal either \\(\\approx 3.29\\) \\(\\approx 3.28\\), depending whether one uses one-step estimator TML estimator.","code":"# simulate a random sample sample_df <- tte_outcome_dgp(n_obs = 1000)  # one-step estimator unihtee(   data = sample_df,   confounders = c(\"w_1\", \"w_2\", \"w_3\"),   modifiers = c(\"w_1\", \"w_2\", \"w_3\"),   exposure = \"a\",   outcome = \"time\",   censoring = \"censoring_indicator\",   time_cutoff = 5,   outcome_type = \"time-to-event\",   effect = \"relative\",   estimator = \"onestep\",   prop_score_estimator = sl3::Lrnr_glmnet$new(),   failure_hazard_estimator = sl3::Lrnr_xgboost$new(),   censoring_hazard_estimator = sl3::Lrnr_glmnet$new(),   cross_fit = TRUE ) #>    modifier   estimate        se          z      p_value  ci_lower  ci_upper #> 1:      w_1  3.2868215 0.7571221  4.3412042 1.417039e-05  1.802862 4.7707807 #> 2:      w_3 -1.6368035 1.2089918 -1.3538582 1.757816e-01 -4.006428 0.7328204 #> 3:      w_2 -0.5309253 0.7692443 -0.6901908 4.900742e-01 -2.038644 0.9767935 #>     p_value_fdr #> 1: 4.251118e-05 #> 2: 2.636724e-01 #> 3: 4.900742e-01  # TML estimator unihtee(   data = sample_df,   confounders = c(\"w_1\", \"w_2\", \"w_3\"),   modifiers = c(\"w_1\", \"w_2\", \"w_3\"),   exposure = \"a\",   outcome = \"time\",   censoring = \"censoring_indicator\",   time_cutoff = 5,   outcome_type = \"time-to-event\",   effect = \"relative\",   estimator = \"tmle\",   prop_score_estimator = sl3::Lrnr_glmnet$new(),   failure_hazard_estimator = sl3::Lrnr_xgboost$new(),   censoring_hazard_estimator = sl3::Lrnr_glmnet$new(),   cross_fit = TRUE ) #>    modifier   estimate       se           z     p_value   ci_lower  ci_upper #> 1:      w_1  3.2826140 1.139237  2.88141401 0.003958952   1.049709  5.515519 #> 2:      w_2  0.2824440 1.057572  0.26706826 0.789416602  -1.790398  2.355286 #> 3:      w_3 -0.2385342 6.600093 -0.03614104 0.971169901 -13.174716 12.697648 #>    p_value_fdr #> 1:  0.01187686 #> 2:  0.97116990 #> 3:  0.97116990"},{"path":[]},{"path":"https://insightsengineering.github.io/unihtee/main/articles/using-unihtee.html","id":"working-with-randomized-experiment-data","dir":"Articles","previous_headings":"Additional Features and Notes","what":"Working with Randomized Experiment Data","title":"Using unihtee","text":"unihtee’s estimators applied (simulated) observational data previous section’s examples, also suitable data generated randomized experiments. propensity scores used randomize observations saved data object passed unihtee(), name variable containing scores indicated propensity_score_values argument. Providing known propensity scores absolute TEM-VIP estimators produces desirable results. continuous binary outcome settings, providing known treatment assignment probabilities guarantees estimators asymptotically linear, even expected conditional outcome estimator misspecified. outcome right-censored time--event variable, asymptotic normality estimators guaranteed long conditional censoring hazard estimated consistently rate \\(n^{-1/4}\\). Additional details discussions provided Boileau et al. (2022) Boileau et al. (2023).","code":""},{"path":"https://insightsengineering.github.io/unihtee/main/articles/using-unihtee.html","id":"cross-fitting","dir":"Articles","previous_headings":"Additional Features and Notes","what":"Cross-Fitting","title":"Using unihtee","text":"Cross-fitting, popularized Zheng van der Laan (2011) Chernozhukov et al. (2017), uses cross-validation fit nuisance parameters estimate target parameter. relaxes entropy constraints required asymptotic normality one-step TML estimators implemented unihtee package. technique also known improve estimators finite-sample properties, reducing false discovery rate (see, example, Hejazi et al.). Users may employ cross-fitted version estimator implemented unihtee setting unihtee()’s cross_fit argument TRUE. K-fold cross-validation currently supported. number folds defaults five, though can modified using cross_fit_folds argument. Examples provided binary outcome time--event outcome relative TEM-VIP sections vignette, well subsection Super Learners follows.","code":""},{"path":"https://insightsengineering.github.io/unihtee/main/articles/using-unihtee.html","id":"sl3-integration-using-super-learners","dir":"Articles","previous_headings":"Additional Features and Notes","what":"sl3 Integration: Using Super Learners","title":"Using unihtee","text":"unihtee uses estimators implemented sl3 (Coyle et al. 2021) estimate nuisance parameters. individual estimators may used, done examples , sl3’s main contribution facilities constructing Super Learners (Laan, Polley, Hubbard 2007). Super Learners ensemble algorithms, meaning convex combination individual supervised learning algorithms. individual algorithms combined basis user-defined risk, combination asymptotically optimal respect said risk minimal conditions data-generating process. complete review Super Learners sl3 outside scope vignette. invite interested reader tutorials available sl3 package’s website Chapter 6 tlverse handbook (Phillips 2023). Employing Super Learners estimate nuisance parameters decreases risk model-misspecification — assuming, course, diverse collection individual learning algorithms considered. turn, increased likelihood resulting one-step TML estimators asymptotically normal. revisit continuous outcome example, time using Super Learners estimate propensity score conditional expected outcomes. Super Learners composed penalized GLMs, multivariate adaptive regression splines (Friedman 1991), Random Forests. propensity score’s Super Learner uses log loss form convex combination individual learning algorithms, conditional expected outcomes’ uses squared error loss. Additionally, employ 2-fold cross-fitting. Though procedure robust, resulting estimates hypothesis tests previous continuous outcome, absolute TEM-VIP example.","code":"# simulate a random sample sample_df <- cont_outcome_dgp(n_obs = 500)  # define the Super Learner for the propensity score sl_bin <- Lrnr_sl$new(   learners = list(     Lrnr_glmnet$new(family = \"binomial\", alpha = 0),     Lrnr_glmnet$new(family = \"binomial\", alpha = 0),     Lrnr_glmnet$new(family = \"binomial\", alpha = 0.5),     Lrnr_earth$new(glm = list(family = \"binomial\")),     Lrnr_ranger$new()   ),   metalearner = make_learner(     Lrnr_solnp, metalearner_logistic_binomial,     loss_squared_error   ) )  # define the Super Learner for the conditional expected outcomes sl_cont <- Lrnr_sl$new(   learners = list(     Lrnr_glmnet$new(       family = \"gaussian\",       formula = \"~ a * w_1 + a * w_2 + a * w_3 + a * w_4 + a * w_5\"     ),     Lrnr_glmnet$new(       family = \"gaussian\",       alpha = 0,       formula = \"~ a * w_1 + a * w_2 + a * w_3 + a * w_4 + a * w_5\"     ),     Lrnr_glmnet$new(       family = \"gaussian\",       alpha = 0.5,       formula = \"~ a * w_1 + a * w_2 + a * w_3 + a * w_4 + a * w_5\"     ),     Lrnr_earth$new(       glm = list(family = \"gaussian\"),       degree = 1     ),     Lrnr_earth$new(       glm = list(family = \"gaussian\"),       degree = 2     ),     Lrnr_earth$new(       glm = list(family = \"gaussian\"),       formula = \"~ a * w_1 + a * w_2 + a * w_3 + a * w_4 + a * w_5\"     ),     Lrnr_ranger$new()   ),   metalearner = make_learner(     Lrnr_solnp, metalearner_linear, sl3::loss_squared_error   ) )  # one-step estimator unihtee(   data = sample_df,   confounders = c(\"w_1\", \"w_2\", \"w_3\", \"w_4\", \"w_5\"),   modifiers =  c(\"w_1\", \"w_2\", \"w_3\", \"w_4\", \"w_5\"),   exposure = \"a\",   outcome = \"y\",   outcome_type = \"continuous\",   effect = \"absolute\",   estimator = \"onestep\",   cond_outcome_estimator = sl_cont,   prop_score_estimator = sl_bin,   cross_fit = TRUE,   cross_fit_folds = 2 ) #>    modifier    estimate         se          z   p_value    ci_lower  ci_upper #> 1:      w_2  1.01322539 0.10199926  9.9336541 0.0000000  0.81330683 1.2131439 #> 2:      w_3  1.98347632 0.13831711 14.3400644 0.0000000  1.71237477 2.2545779 #> 3:      w_4  0.15980555 0.09755231  1.6381525 0.1013899 -0.03139697 0.3510081 #> 4:      w_1 -0.01980657 0.10279772 -0.1926752 0.8472134 -0.22129009 0.1816770 #> 5:      w_5  0.01434660 0.09377385  0.1529915 0.8784050 -0.16945014 0.1981433 #>    p_value_fdr #> 1:   0.0000000 #> 2:   0.0000000 #> 3:   0.1689832 #> 4:   0.8784050 #> 5:   0.8784050  # TML estimator unihtee(   data = sample_df,   confounders = c(\"w_1\", \"w_2\", \"w_3\", \"w_4\", \"w_5\"),   modifiers =  c(\"w_1\", \"w_2\", \"w_3\", \"w_4\", \"w_5\"),   exposure = \"a\",   outcome = \"y\",   outcome_type = \"continuous\",   effect = \"absolute\",   estimator = \"tmle\",   cond_outcome_estimator = sl_cont,   prop_score_estimator = sl_bin,   cross_fit = TRUE,   cross_fit_folds = 2 ) #>    modifier    estimate         se          z   p_value    ci_lower  ci_upper #> 1:      w_2  0.98762260 0.10454871  9.4465306 0.0000000  0.78270713 1.1925381 #> 2:      w_3  1.98247449 0.13797716 14.3681356 0.0000000  1.71203926 2.2529097 #> 3:      w_4  0.15711403 0.09755985  1.6104374 0.1073024 -0.03410328 0.3483313 #> 4:      w_1 -0.03473524 0.10365604 -0.3351010 0.7375489 -0.23790108 0.1684306 #> 5:      w_5  0.01402747 0.09395343  0.1493023 0.8813151 -0.17012126 0.1981762 #>    p_value_fdr #> 1:   0.0000000 #> 2:   0.0000000 #> 3:   0.1788373 #> 4:   0.8813151 #> 5:   0.8813151"},{"path":"https://insightsengineering.github.io/unihtee/main/articles/using-unihtee.html","id":"session-information","dir":"Articles","previous_headings":"","what":"Session information","title":"Using unihtee","text":"","code":"sessionInfo() #> R version 4.2.2 (2022-10-31) #> Platform: x86_64-pc-linux-gnu (64-bit) #> Running under: Ubuntu 22.04.1 LTS #>  #> Matrix products: default #> BLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3 #> LAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so #>  #> locale: #>  [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C               #>  [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8     #>  [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8    #>  [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                  #>  [9] LC_ADDRESS=C               LC_TELEPHONE=C             #> [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C        #>  #> attached base packages: #> [1] stats     graphics  grDevices utils     datasets  methods   base      #>  #> other attached packages: #>  [1] unihtee_0.0.1      earth_5.3.2        plotmo_3.6.2       TeachingDemos_2.12 #>  [5] plotrix_3.8-2      Formula_1.2-4      ranger_0.14.1      xgboost_1.7.3.1    #>  [9] glmnet_4.1-6       Matrix_1.5-3       Rsolnp_1.16        sl3_1.4.4          #> [13] dplyr_1.1.0        #>  #> loaded via a namespace (and not attached): #>   [1] colorspace_2.1-0     ellipsis_0.3.2       class_7.3-21         #>   [4] rprojroot_2.0.3      fs_1.6.1             listenv_0.9.0        #>   [7] prodlim_2019.11.13   fansi_1.0.4          lubridate_1.9.2      #>  [10] codetools_0.2-19     splines_4.2.2        R.methodsS3_1.8.2    #>  [13] cachem_1.0.6         knitr_1.42           jsonlite_1.8.4       #>  [16] pROC_1.18.0          caret_6.0-93         R.oo_1.25.0          #>  [19] compiler_4.2.2       backports_1.4.1      assertthat_0.2.1     #>  [22] fastmap_1.1.0        rstackdeque_1.1.1    cli_3.6.0            #>  [25] visNetwork_2.1.2     htmltools_0.5.4      prettyunits_1.1.1    #>  [28] tools_4.2.2          igraph_1.4.0         gtable_0.3.1         #>  [31] glue_1.6.2           reshape2_1.4.4       Rcpp_1.0.10          #>  [34] jquerylib_0.1.4      pkgdown_2.0.7        vctrs_0.5.2          #>  [37] nlme_3.1-162         iterators_1.0.14     timeDate_4022.108    #>  [40] origami_1.0.7        gower_1.0.1          xfun_0.37            #>  [43] stringr_1.5.0        globals_0.16.2       rbibutils_2.2.13     #>  [46] delayed_0.4.0        timechange_0.2.0     lifecycle_1.0.3      #>  [49] future_1.31.0        MASS_7.3-58.2        scales_1.2.1         #>  [52] ipred_0.9-13         ragg_1.2.5           hms_1.1.2            #>  [55] parallel_4.2.2       BBmisc_1.13          yaml_2.3.7           #>  [58] memoise_2.0.1        ggplot2_3.4.1        sass_0.4.5           #>  [61] rpart_4.1.19         stringi_1.7.12       desc_1.4.2           #>  [64] foreach_1.5.2        randomForest_4.7-1.1 checkmate_2.1.0      #>  [67] hardhat_1.2.0        lava_1.7.1           truncnorm_1.0-8      #>  [70] shape_1.4.6          Rdpack_2.4           rlang_1.0.6          #>  [73] pkgconfig_2.0.3      systemfonts_1.0.4    evaluate_0.20        #>  [76] lattice_0.20-45      ROCR_1.0-11          purrr_1.0.1          #>  [79] recipes_1.0.5        htmlwidgets_1.6.1    tidyselect_1.2.0     #>  [82] parallelly_1.34.0    plyr_1.8.8           magrittr_2.0.3       #>  [85] R6_2.5.1             generics_0.1.3       pillar_1.8.1         #>  [88] withr_2.5.0          survival_3.5-3       abind_1.4-5          #>  [91] nnet_7.3-18          tibble_3.1.8         future.apply_1.10.0  #>  [94] crayon_1.5.2         uuid_1.1-0           utf8_1.2.3           #>  [97] rmarkdown_2.20       imputeMissings_0.0.3 progress_1.2.2       #> [100] grid_4.2.2           data.table_1.14.8    ModelMetrics_1.2.2.2 #> [103] digest_0.6.31        R.utils_2.12.2       textshaping_0.3.6    #> [106] stats4_4.2.2         munsell_0.5.0        bslib_0.4.2"},{"path":"https://insightsengineering.github.io/unihtee/main/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Philippe Boileau. Author, maintainer.","code":""},{"path":"https://insightsengineering.github.io/unihtee/main/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Boileau P (2023). unihtee: Univariate Heterogeneous Treatment Effect Estimation. R package version 0.0.1.","code":"@Manual{,   title = {unihtee: Univariate Heterogeneous Treatment Effect Estimation},   author = {Philippe Boileau},   year = {2023},   note = {R package version 0.0.1}, }"},{"path":"https://insightsengineering.github.io/unihtee/main/index.html","id":"runihtee","dir":"","previous_headings":"","what":"Univariate Heterogeneous Treatment Effect Estimation","title":"Univariate Heterogeneous Treatment Effect Estimation","text":"Univariate Heterogeneous Treatment Effect Estimation Author: Philippe Boileau unihtee provides tools uncovering treatment effect modifiers high-dimensional data. Treatment effect modification defined using variable importance parameters based absolute relative effects. Inference performed variable importance measures using nonparametric estimators. Users may use one-step targeted maximum likelihood estimators. general conditions, estimators unbiased efficient. Additional details methodology provided Boileau et al. (2022) package’s vignette.","code":""},{"path":"https://insightsengineering.github.io/unihtee/main/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Univariate Heterogeneous Treatment Effect Estimation","text":"package may installed GitHub using remotes: unihtee active development. Check back often updates.","code":"remotes::install_github(\"insightsengineering/unihtee\")"},{"path":"https://insightsengineering.github.io/unihtee/main/index.html","id":"usage","dir":"","previous_headings":"","what":"Usage","title":"Univariate Heterogeneous Treatment Effect Estimation","text":"unihtee() user-facing function. can used perform inference treatment effect modification variable importance parameters. parameters defined data-generating processes continuous, binary time--event outcomes binary exposure variables. Variable importance parameters based absolute relative effects available. Details provided vignette.","code":""},{"path":"https://insightsengineering.github.io/unihtee/main/index.html","id":"example","dir":"","previous_headings":"","what":"Example","title":"Univariate Heterogeneous Treatment Effect Estimation","text":"simulate observational study data contains ten pre-treatment covariates, two treatment effect modifiers. perform inference absolute treatment effect modifier variable importance parameter, inspired average treatment effect.","code":"library(unihtee) library(MASS) library(data.table) library(sl3)  set.seed(510)  ## create the dataset n_obs <- 500 w <- mvrnorm(n = n_obs, mu = rep(0, 10), Sigma = diag(10)) confounder_names <- paste0(\"w_\", seq_len(10)) colnames(w) <- confounder_names a <- rbinom(n = n_obs, size = 1, prob = plogis(w[, 1] + w[, 2])) y <- rnorm(n = n_obs, mean = w[, 1] + w[, 2] + a * w[, 3] - a * w[, 4]) dt <- as.data.table(cbind(w, a, y))  ## targeted maximum likelihood estimates and testing procedure unihtee(   data = dt,   confounders = confounder_names,   modifiers = confounder_names,   exposure = \"a\",   outcome = \"y\",   outcome_type = \"continuous\",   effect = \"absolute\",   estimator = \"tmle\" ) #>     modifier     estimate        se           z      p_value    ci_lower #>  1:      w_3  1.044592804 0.1613285  6.47494319 9.484769e-11  0.72838896 #>  2:      w_4 -0.869002514 0.1492388 -5.82289742 5.783606e-09 -1.16151066 #>  3:      w_8  0.137803254 0.1137965  1.21096238 2.259098e-01 -0.08523784 #>  4:      w_1  0.115258422 0.1160997  0.99275414 3.208298e-01 -0.11229692 #>  5:      w_9  0.124150185 0.1300374  0.95472664 3.397160e-01 -0.13072315 #>  6:     w_10 -0.097928234 0.1356976 -0.72166517 4.705004e-01 -0.36389554 #>  7:      w_6  0.054845105 0.1159964  0.47281713 6.363437e-01 -0.17250792 #>  8:      w_2 -0.064478504 0.1767632 -0.36477331 7.152806e-01 -0.41093441 #>  9:      w_7 -0.014704981 0.1485331 -0.09900136 9.211372e-01 -0.30582989 #> 10:      w_5  0.001500152 0.1103752  0.01359138 9.891560e-01 -0.21483526 #>       ci_upper  p_value_fdr #>  1:  1.3607966 9.484769e-10 #>  2: -0.5764944 2.891803e-08 #>  3:  0.3608444 6.794319e-01 #>  4:  0.3428138 6.794319e-01 #>  5:  0.3790235 6.794319e-01 #>  6:  0.1680391 7.841673e-01 #>  7:  0.2821981 8.941008e-01 #>  8:  0.2819774 8.941008e-01 #>  9:  0.2764199 9.891560e-01 #> 10:  0.2178356 9.891560e-01"},{"path":"https://insightsengineering.github.io/unihtee/main/index.html","id":"issues","dir":"","previous_headings":"","what":"Issues","title":"Univariate Heterogeneous Treatment Effect Estimation","text":"encounter bugs specific feature requests, please file issue.","code":""},{"path":"https://insightsengineering.github.io/unihtee/main/index.html","id":"contributions","dir":"","previous_headings":"","what":"Contributions","title":"Univariate Heterogeneous Treatment Effect Estimation","text":"Contributions welcome. Interested contributors consult contribution guidelines prior submitting pull request.","code":""},{"path":"https://insightsengineering.github.io/unihtee/main/index.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Univariate Heterogeneous Treatment Effect Estimation","text":"Cite unihtee using following BibTeX entry:","code":"@manual{unihtee,   title = {unihtee: Univariate Heterogeneous Treatment Effect Estimation},   author = {Philippe Boileau},   note = {R package version 0.0.1} }"},{"path":"https://insightsengineering.github.io/unihtee/main/index.html","id":"license","dir":"","previous_headings":"","what":"License","title":"Univariate Heterogeneous Treatment Effect Estimation","text":"contents repository distributed Apache 2.0 license. See LICENSE.md LICENSE files details.","code":""},{"path":[]},{"path":"https://insightsengineering.github.io/unihtee/main/pull_request_template.html","id":null,"dir":"","previous_headings":"","what":"Description","title":"Description","text":"Please include summary change issue fixed. Please also include relevant motivation context. List dependencies required change. Fixes # (issue)","code":""},{"path":"https://insightsengineering.github.io/unihtee/main/pull_request_template.html","id":"type-of-change","dir":"","previous_headings":"","what":"Type of change","title":"Description","text":"Please delete options relevant. Bug fix (non-breaking change fixes issue) New feature (non-breaking change adds functionality) Breaking change (fix feature cause existing functionality work expected) change requires documentation update","code":""},{"path":"https://insightsengineering.github.io/unihtee/main/pull_request_template.html","id":"testing","dir":"","previous_headings":"","what":"Testing","title":"Description","text":"Please describe tests ran verify changes. Test Test B","code":""},{"path":"https://insightsengineering.github.io/unihtee/main/pull_request_template.html","id":"checklist","dir":"","previous_headings":"","what":"Checklist","title":"Description","text":"code follows style guidelines project performed self-review code commented code, particularly hard--understand areas made corresponding changes documentation changes generate new warnings added tests prove fix effective feature works New existing unit tests pass locally changes dependent changes merged published downstream modules","code":""},{"path":"https://insightsengineering.github.io/unihtee/main/reference/bound_precision.html","id":null,"dir":"Reference","previous_headings":"","what":"Bounding to numerical precision — bound_precision","title":"Bounding to numerical precision — bound_precision","text":"Bounds extreme values specified tolerance level, use sensitive quantities must transformed, e.g., via qlogis.","code":""},{"path":"https://insightsengineering.github.io/unihtee/main/reference/bound_precision.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Bounding to numerical precision — bound_precision","text":"","code":"bound_precision(vals, tol = 1e-06)"},{"path":"https://insightsengineering.github.io/unihtee/main/reference/bound_precision.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Bounding to numerical precision — bound_precision","text":"vals numeric vector values unit interval [0, 1]. tol numeric indicating tolerance limit extreme values truncated. Realizations val less tol truncated tol greater (1 - tol) truncated (1 - tol).","code":""},{"path":"https://insightsengineering.github.io/unihtee/main/reference/bound_precision.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Bounding to numerical precision — bound_precision","text":"Nima S. Hejazi","code":""},{"path":"https://insightsengineering.github.io/unihtee/main/reference/cross_fit_fold.html","id":null,"dir":"Reference","previous_headings":"","what":"Cross-Fitting Procedure — cross_fit_fold","title":"Cross-Fitting Procedure — cross_fit_fold","text":"cross_fit_fold() estimates treatment effect modification variable importance parameters using cross-fitting.","code":""},{"path":"https://insightsengineering.github.io/unihtee/main/reference/cross_fit_fold.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Cross-Fitting Procedure — cross_fit_fold","text":"","code":"cross_fit_fold(   fold,   data,   confounders,   modifiers,   exposure,   outcome,   censoring,   outcome_type,   effect,   estimator,   cond_outcome_estimator,   prop_score_estimator,   prop_score_values,   failure_hazard_estimator,   censoring_hazard_estimator )"},{"path":"https://insightsengineering.github.io/unihtee/main/reference/cross_fit_fold.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Cross-Fitting Procedure — cross_fit_fold","text":"fold origami fold object. data data.table containing observed data. confounders character vector column names corresponding baseline covariates. modifiers character vector columns names corresponding suspected effect modifiers. vector must subset confounders. exposure character corresponding exposure variable. outcome character corresponding outcome variable. censoring character indicating right censoring indicator variable. used time--event outcomes. Defaults NULL. outcome_type character indicating outcome type. \"continuous\", \"binary\" \"time--event\" currently supported. effect character indicating type treatment effect modifier variable importance parameter. Currently supports \"absolute\" \"relative\". estimator character set either \"tmle\" \"onestep\". former results unihtee() use targeted maximum likelihood estimators estimate desired TEM-VIP, latter uses one step estimator. cond_outcome_estimator Stack, learner class (inheriting Lrnr_base), containing set learners sl3 estimate conditional outcome. Defaults generalized linear model one- two- way interactions among confounders exposure variables. used continuous binary outcomes. prop_score_estimator Stack, learner class (inheriting Lrnr_base), containing set learners sl3 estimate propensity score. Defaults generalized linear model one- two- way interactions among confounders variables. prop_score_values optional character corresponding (known) propensity score values observation data. Defaults NULL. failure_hazard_estimator Stack, learner class (inheriting Lrnr_base), containing set learners sl3 estimate conditional failure hazard function. Defaults XGBoost learner confounders exposure variables covariates. used time--event outcomes. censoring_hazard_estimator Stack, learner class (inheriting Lrnr_base), containing set learners sl3 estimate conditional censoring hazard function. Defaults XGBoost learner confounders exposure variables covariates. used time--event outcomes.","code":""},{"path":"https://insightsengineering.github.io/unihtee/main/reference/cross_fit_fold.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Cross-Fitting Procedure — cross_fit_fold","text":"list object containing validation dataset's uncentered efficient influence function estimates, treatment effect modification variable importance parameter estimates proportion observations validation data.","code":""},{"path":"https://insightsengineering.github.io/unihtee/main/reference/fit_censoring_hazard.html","id":null,"dir":"Reference","previous_headings":"","what":"Conditional Censoring Hazard Estimator — fit_censoring_hazard","title":"Conditional Censoring Hazard Estimator — fit_censoring_hazard","text":"fit_censoring_hazard() estimates conditional censoring hazard nuisance parameter. estimator used estimation based learners argument, covariates considered specified confounders exposure arguments.","code":""},{"path":"https://insightsengineering.github.io/unihtee/main/reference/fit_censoring_hazard.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Conditional Censoring Hazard Estimator — fit_censoring_hazard","text":"","code":"fit_censoring_hazard(   train_data,   valid_data,   learners,   confounders,   exposure,   times,   censoring )"},{"path":"https://insightsengineering.github.io/unihtee/main/reference/fit_censoring_hazard.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Conditional Censoring Hazard Estimator — fit_censoring_hazard","text":"train_data long data.table containing observed data. train_data formatted unihtee() tte_data_melt(). valid_data optional data.table representing holdout dataset observed data. used cross-fitting purposes. Defaults NULL. learners Stack, learner class (inheriting Lrnr_base), containing set learners sl3 estimate propensity score model. confounders character vector column names corresponding baseline covariates. exposure character corresponding exposure variable. times character giving name corresponding times. censoring character indicating censoring indicator.","code":""},{"path":"https://insightsengineering.github.io/unihtee/main/reference/fit_censoring_hazard.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Conditional Censoring Hazard Estimator — fit_censoring_hazard","text":"named list three elements. (1) \"estimates\", expected censoring hazards observation time point valid_data, specified, train_data otherwise. (2) \"exp_estimates\", expected conditional censoring hazards observation time point valid_data, specified, train_data otherwise, observations exposed. (3) \"noexp_estimates\", expected conditional censoring hazards observation time point valid_data, specified, train_data otherwise, observations exposed.","code":""},{"path":"https://insightsengineering.github.io/unihtee/main/reference/fit_cond_outcome.html","id":null,"dir":"Reference","previous_headings":"","what":"Conditional Outcome Estimator — fit_cond_outcome","title":"Conditional Outcome Estimator — fit_cond_outcome","text":"fit_cond_outcome() estimates conditional outcome, based exposure confounders, train_data dataset. estimator used estimation based learners argument, covariates considered specified confounders exposure arguments.","code":""},{"path":"https://insightsengineering.github.io/unihtee/main/reference/fit_cond_outcome.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Conditional Outcome Estimator — fit_cond_outcome","text":"","code":"fit_cond_outcome(   train_data,   valid_data,   learners,   outcome,   exposure,   confounders )"},{"path":"https://insightsengineering.github.io/unihtee/main/reference/fit_cond_outcome.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Conditional Outcome Estimator — fit_cond_outcome","text":"train_data data.table containing observed data. train_data formatted unihtee(). valid_data optional data.table representing holdout dataset observed data. used cross-fitting purposes. Defaults NULL. learners Stack, learner class (inheriting Lrnr_base), containing set learners sl3 estimate propensity score model. outcome character corresponding outcome variable. exposure character corresponding exposure variable. confounders character vector column names corresponding baseline covariates.","code":""},{"path":"https://insightsengineering.github.io/unihtee/main/reference/fit_cond_outcome.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Conditional Outcome Estimator — fit_cond_outcome","text":"named list four elements. (1) \"estimates\", expected conditional outcome observation valid_data, specified, train_data otherwise. (2) \"fit\", trained Stack learner. (3) \"exp_estimates\", expected conditional outcome observation valid_data, specified, train_data otherwise, observations exposed. (4) \"noexp_estimates\", expected conditional outcome observation valid_data, specified, train_data otherwise, observations exposed.","code":""},{"path":"https://insightsengineering.github.io/unihtee/main/reference/fit_failure_hazard.html","id":null,"dir":"Reference","previous_headings":"","what":"Conditional Failure Hazard Estimator — fit_failure_hazard","title":"Conditional Failure Hazard Estimator — fit_failure_hazard","text":"fit_failure_hazard() estimates conditional failure hazard nuisance parameter. estimator used estimation based learners argument, covariates considered specified confounders exposure arguments.","code":""},{"path":"https://insightsengineering.github.io/unihtee/main/reference/fit_failure_hazard.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Conditional Failure Hazard Estimator — fit_failure_hazard","text":"","code":"fit_failure_hazard(   train_data,   valid_data,   learners,   confounders,   exposure,   times )"},{"path":"https://insightsengineering.github.io/unihtee/main/reference/fit_failure_hazard.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Conditional Failure Hazard Estimator — fit_failure_hazard","text":"train_data long data.table containing observed data. train_data formatted unihtee() tte_data_melt(). valid_data optional data.table representing holdout dataset observed data. used cross-fitting purposes. Defaults NULL. learners Stack, learner class (inheriting Lrnr_base), containing set learners sl3 estimate propensity score model. confounders character vector column names corresponding baseline covariates. exposure character corresponding exposure variable. times character giving name corresponding times.","code":""},{"path":"https://insightsengineering.github.io/unihtee/main/reference/fit_failure_hazard.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Conditional Failure Hazard Estimator — fit_failure_hazard","text":"named list three elements. (1) \"estimates\", expected failure hazards observation time point valid_data, specified, train_data otherwise. (2) \"exp_estimates\", expected conditional failure hazards observation time point valid_data, specified, train_data otherwise, observations exposed. (3) \"noexp_estimates\", expected conditional failure hazards observation time point valid_data, specified, train_data otherwise, observations exposed.","code":""},{"path":"https://insightsengineering.github.io/unihtee/main/reference/fit_prop_score.html","id":null,"dir":"Reference","previous_headings":"","what":"Propensity Score Estimator — fit_prop_score","title":"Propensity Score Estimator — fit_prop_score","text":"fit_prop_score() estimates propensity score train_data dataset. estimator used estimation based learners argument, covariates considered specified confounders argument.","code":""},{"path":"https://insightsengineering.github.io/unihtee/main/reference/fit_prop_score.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Propensity Score Estimator — fit_prop_score","text":"","code":"fit_prop_score(train_data, valid_data, learners, exposure, confounders)"},{"path":"https://insightsengineering.github.io/unihtee/main/reference/fit_prop_score.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Propensity Score Estimator — fit_prop_score","text":"train_data data.table containing observed data. train_data formatted unihtee(). valid_data optional data.table representing holdout dataset observed data. used cross-fitting purposes. Defaults NULL. learners Stack, learner class (inheriting Lrnr_base), containing set learners sl3 estimate propensity score model. exposure character corresponding exposure variable. confounders character vector column names corresponding baseline covariates.","code":""},{"path":"https://insightsengineering.github.io/unihtee/main/reference/fit_prop_score.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Propensity Score Estimator — fit_prop_score","text":"named list two elements. (1) \"estimates\", propensity score estimates observation valid_data, specified, train_data otherwise. (2) \"fit\", trained Stack learner.","code":""},{"path":"https://insightsengineering.github.io/unihtee/main/reference/one_step_estimator.html","id":null,"dir":"Reference","previous_headings":"","what":"One Step Estimator — one_step_estimator","title":"One Step Estimator — one_step_estimator","text":"one_step_estimator() computes one-step estimates given parameter provided uncentered efficient influence functions.","code":""},{"path":"https://insightsengineering.github.io/unihtee/main/reference/one_step_estimator.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"One Step Estimator — one_step_estimator","text":"","code":"one_step_estimator(uncentered_eif_data)"},{"path":"https://insightsengineering.github.io/unihtee/main/reference/one_step_estimator.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"One Step Estimator — one_step_estimator","text":"uncentered_eif_data data.table column efficient influence function potential treatment effect modifier applied dataset.","code":""},{"path":"https://insightsengineering.github.io/unihtee/main/reference/one_step_estimator.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"One Step Estimator — one_step_estimator","text":"one-row data.table containing one-step estimates potential modifier.","code":""},{"path":"https://insightsengineering.github.io/unihtee/main/reference/test_hypotheses.html","id":null,"dir":"Reference","previous_headings":"","what":"Test Hypotheses — test_hypotheses","title":"Test Hypotheses — test_hypotheses","text":"test_hypotheses() convenience function testing null hypotheses.","code":""},{"path":"https://insightsengineering.github.io/unihtee/main/reference/test_hypotheses.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Test Hypotheses — test_hypotheses","text":"","code":"test_hypotheses(n_obs, estimates, var_estimates, rescale_factor)"},{"path":"https://insightsengineering.github.io/unihtee/main/reference/test_hypotheses.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Test Hypotheses — test_hypotheses","text":"n_obs numeric representing number observations dataset. estimates one-row data.table estimates potential treatment effect modifier. var_estimates one-row data.table estimator variances potential treatment effect modifier. rescale_factor numeric factor re-scale estimates efficient influence functions. Used outcome variable continuous bounded 0 1.","code":""},{"path":"https://insightsengineering.github.io/unihtee/main/reference/test_hypotheses.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Test Hypotheses — test_hypotheses","text":"data.table containing hypothesis testing results.","code":""},{"path":"https://insightsengineering.github.io/unihtee/main/reference/tml_estimator.html","id":null,"dir":"Reference","previous_headings":"","what":"Targeted Maximum Likelihood Estimator — tml_estimator","title":"Targeted Maximum Likelihood Estimator — tml_estimator","text":"tml_estimator() computes targeted maximum likelihood estimates given parameter.","code":""},{"path":"https://insightsengineering.github.io/unihtee/main/reference/tml_estimator.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Targeted Maximum Likelihood Estimator — tml_estimator","text":"","code":"tml_estimator(   data,   confounders,   modifiers,   exposure,   outcome,   effect,   prop_score_fit,   prop_score_values = NULL,   cond_outcome_fit,   failure_hazard_fit,   censoring_hazard_fit )"},{"path":"https://insightsengineering.github.io/unihtee/main/reference/tml_estimator.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Targeted Maximum Likelihood Estimator — tml_estimator","text":"data data.table containing observed data. train_data formatted unihtee(). confounders character vector column names corresponding baseline covariates. modifiers character vector columns names corresponding suspected effect modifiers. vector must subset confounders. exposure character corresponding exposure variable. outcome character corresponding outcome variable. effect character indicating type treatment effect modifier variable importance parameter. Currently supports \"absolute\" \"relative\". prop_score_fit list output fit_prop_score() function. prop_score_values numeric vector corresponding (known) propensity score values observation data. cond_outcome_fit list output fit_cond_outcome() function. failure_hazard_fit list output fit_cond_outcome() function.' censoring_hazard_fit list output fit_censoring_hazard() function.'","code":""},{"path":"https://insightsengineering.github.io/unihtee/main/reference/tml_estimator.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Targeted Maximum Likelihood Estimator — tml_estimator","text":"one-row data.table containing targeted maximum likelihood estimates potential modifier.","code":""},{"path":"https://insightsengineering.github.io/unihtee/main/reference/tte_data_melt.html","id":null,"dir":"Reference","previous_headings":"","what":"Time-to-Event Data Melt — tte_data_melt","title":"Time-to-Event Data Melt — tte_data_melt","text":"tte_data_melt() turns wide-format data.table objects long-format data.table objects.","code":""},{"path":"https://insightsengineering.github.io/unihtee/main/reference/tte_data_melt.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Time-to-Event Data Melt — tte_data_melt","text":"","code":"tte_data_melt(   data,   confounders,   exposure,   outcome,   censoring,   time_cutoff,   prop_score_values )"},{"path":"https://insightsengineering.github.io/unihtee/main/reference/tte_data_melt.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Time-to-Event Data Melt — tte_data_melt","text":"data data.table containing observed data. confounders character vector column names corresponding baseline covariates. exposure character corresponding exposure variable. outcome character corresponding outcome variable. censoring character indicating right censoring indicator variable. time_cutoff numeric representing time point evaluate time--event parameter. prop_score_values character corresponding (known) propensity score values observation data.","code":""},{"path":"https://insightsengineering.github.io/unihtee/main/reference/tte_data_melt.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Time-to-Event Data Melt — tte_data_melt","text":"long, time--event version original data.table object. , observations repeated time points earliest time data time_cutoff argument.","code":""},{"path":"https://insightsengineering.github.io/unihtee/main/reference/uncentered_eif.html","id":null,"dir":"Reference","previous_headings":"","what":"Uncentered Efficient Influence Function Computer — uncentered_eif","title":"Uncentered Efficient Influence Function Computer — uncentered_eif","text":"uncentered_eif() computes efficient influence function chosen parameter using already estimated nuisance parameters. certain nuisance parameters known, propensity scores randomized control trial, may input directly function.","code":""},{"path":"https://insightsengineering.github.io/unihtee/main/reference/uncentered_eif.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Uncentered Efficient Influence Function Computer — uncentered_eif","text":"","code":"uncentered_eif(   data,   effect,   confounders,   exposure,   outcome,   modifiers,   prop_score_fit,   prop_score_values,   cond_outcome_fit,   failure_hazard_fit,   censoring_hazard_fit )"},{"path":"https://insightsengineering.github.io/unihtee/main/reference/uncentered_eif.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Uncentered Efficient Influence Function Computer — uncentered_eif","text":"data data.table containing observed data. train_data formatted unihtee(). effect character indicating type treatment effect modifier variable importance parameter. Currently supports \"absolute\" \"relative\". confounders character vector column names corresponding baseline covariates. exposure character corresponding exposure variable. outcome character corresponding outcome variable. modifiers character vector columns names corresponding suspected effect modifiers. vector must subset confounders. prop_score_fit list output fit_prop_score() function. prop_score_values numeric vector corresponding (known) propensity score values observation data. cond_outcome_fit list output fit_failure_hazard() function.' failure_hazard_fit list output fit_cond_outcome() function.' censoring_hazard_fit list output fit_censoring_hazard() function.'","code":""},{"path":"https://insightsengineering.github.io/unihtee/main/reference/uncentered_eif.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Uncentered Efficient Influence Function Computer — uncentered_eif","text":"data.table whose columns uncentered efficient influence functions variable modifiers. rows correspond observations data.","code":""},{"path":"https://insightsengineering.github.io/unihtee/main/reference/unihtee.html","id":null,"dir":"Reference","previous_headings":"","what":"Univariate Heterogeneous Treatment Effect Modifier Estimator — unihtee","title":"Univariate Heterogeneous Treatment Effect Modifier Estimator — unihtee","text":"unihtee() estimates treatment effect modifier variable importance parameters (TEM-VIPs). absolute relative TEM-VIPs can estimated using one-step targeted maximum likelihood estimators.","code":""},{"path":"https://insightsengineering.github.io/unihtee/main/reference/unihtee.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Univariate Heterogeneous Treatment Effect Modifier Estimator — unihtee","text":"","code":"unihtee(   data,   confounders,   modifiers,   exposure,   outcome,   censoring = NULL,   time_cutoff = NULL,   outcome_type = c(\"continuous\", \"binary\", \"time-to-event\"),   effect = c(\"absolute\", \"relative\"),   estimator = c(\"tmle\", \"onestep\"),   cross_fit = FALSE,   cross_fit_folds = 5,   cond_outcome_estimator = sl3::Lrnr_glm_fast$new(),   prop_score_estimator = sl3::Lrnr_glm_fast$new(),   prop_score_values = NULL,   failure_hazard_estimator = sl3::Lrnr_xgboost$new(),   censoring_hazard_estimator = sl3::Lrnr_xgboost$new(),   parallel = FALSE )"},{"path":"https://insightsengineering.github.io/unihtee/main/reference/unihtee.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Univariate Heterogeneous Treatment Effect Modifier Estimator — unihtee","text":"data data.table containing observed data. confounders character vector column names corresponding baseline covariates. modifiers character vector columns names corresponding suspected effect modifiers. vector must subset confounders. exposure character corresponding exposure variable. outcome character corresponding outcome variable. censoring character indicating right censoring indicator variable. used time--event outcomes. Defaults NULL. time_cutoff numeric representing time point evaluate time--event parameter. used time--event outcomes. Defaults NULL. outcome_type character indicating outcome type. \"continuous\", \"binary\" \"time--event\" currently supported. effect character indicating type treatment effect modifier variable importance parameter. Currently supports \"absolute\" \"relative\". estimator character set either \"tmle\" \"onestep\". former results unihtee() use targeted maximum likelihood estimators estimate desired TEM-VIP, latter uses one step estimator. cross_fit logical determining whether cross-fitting used. Defaults FALSE. cross_fit_folds numeric stating number folds use cross-fitting procedure. Defaults 5. cond_outcome_estimator Stack, learner class (inheriting Lrnr_base), containing set learners sl3 estimate conditional outcome. Defaults generalized linear model one- two- way interactions among confounders exposure variables. used continuous binary outcomes. prop_score_estimator Stack, learner class (inheriting Lrnr_base), containing set learners sl3 estimate propensity score. Defaults generalized linear model one- two- way interactions among confounders variables. prop_score_values optional character corresponding (known) propensity score values observation data. Defaults NULL. failure_hazard_estimator Stack, learner class (inheriting Lrnr_base), containing set learners sl3 estimate conditional failure hazard function. Defaults XGBoost learner confounders exposure variables covariates. used time--event outcomes. censoring_hazard_estimator Stack, learner class (inheriting Lrnr_base), containing set learners sl3 estimate conditional censoring hazard function. Defaults XGBoost learner confounders exposure variables covariates. used time--event outcomes. parallel logical stating origami's built-parallelized cross-validation routines used cross_fit = TRUE. future suite used. Defaults FALSE.","code":""},{"path":"https://insightsengineering.github.io/unihtee/main/reference/unihtee.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Univariate Heterogeneous Treatment Effect Modifier Estimator — unihtee","text":"data.table containing effect estimates (adjusted) p-values modifiers. suspected treatment effect modifiers ordered according ascending p-values.","code":""},{"path":"https://insightsengineering.github.io/unihtee/main/news/index.html","id":"unihtee-001","dir":"Changelog","previous_headings":"","what":"unihtee 0.0.1","title":"unihtee 0.0.1","text":"Public release unihtee.","code":""}]
